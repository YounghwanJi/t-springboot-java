### 변수 설정
@baseUrl = http://localhost:8080
@apiVersion = v1
@contentType = application/json

### 1. 사용자 생성
POST {{baseUrl}}/api/{{apiVersion}}/users
Content-Type: {{contentType}}

{
  "email": "user1@example.com",
  "password": "password123",
  "name": "홍길동",
  "phoneNumber": "010-1234-5678"
}

> {%
    client.test("사용자 생성 성공", function() {
        client.assert(response.status === 201, "응답 코드는 201이어야 합니다");
        client.assert(response.body.id !== null, "ID가 생성되어야 합니다");
        client.global.set("userId", response.body.id);
    });
%}

### 2. 두 번째 사용자 생성
POST {{baseUrl}}/api/{{apiVersion}}/users
Content-Type: {{contentType}}

{
  "email": "user2@example.com",
  "password": "password456",
  "name": "김철수",
  "phoneNumber": "010-9876-5432"
}

> {%
    client.test("사용자 생성 성공", function() {
        client.assert(response.status === 201, "응답 코드는 201이어야 합니다");
        client.assert(response.body.id !== null, "ID가 생성되어야 합니다");
        client.global.set("userId2", response.body.id);
    });
%}

### 3. 사용자 조회 (단건)
GET {{baseUrl}}/api/{{apiVersion}}/users/{{userId}}

> {%
    client.test("사용자 조회 성공", function() {
        client.assert(response.status === 200, "응답 코드는 200이어야 합니다");
        client.assert(response.body.email !== null, "이메일이 있어야 합니다");
    });
%}

### 4. 사용자 조회 (존재하지 않는 ID)
GET {{baseUrl}}/api/{{apiVersion}}/users/99999

> {%
    client.test("사용자 없음", function() {
        client.assert(response.status === 400 || response.status === 404, "400 또는 404 에러여야 합니다");
    });
%}

### 5. 모든 사용자 조회 (기본 페이징)
GET {{baseUrl}}/api/{{apiVersion}}/users

> {%
    client.test("사용자 목록 조회 성공", function() {
        client.assert(response.status === 200, "응답 코드는 200이어야 합니다");
        client.assert(response.body.content !== null, "content가 있어야 합니다");
    });
%}

### 6. 모든 사용자 조회 (페이징 옵션 포함)
GET {{baseUrl}}/api/{{apiVersion}}/users?page=0&size=5&sort=createdAt,desc

### 7. 모든 사용자 조회 (다중 정렬)
GET {{baseUrl}}/api/{{apiVersion}}/users?page=0&size=10&sort=status,asc&sort=createdAt,desc

### 8. 사용자 수정
PUT {{baseUrl}}/api/{{apiVersion}}/users/{{userId}}
Content-Type: {{contentType}}

{
  "name": "홍길동(수정)",
  "phoneNumber": "010-1111-2222"
}

> {%
    client.test("사용자 수정 성공", function() {
        client.assert(response.status === 200, "응답 코드는 200이어야 합니다");
        client.assert(response.body.name === "홍길동(수정)", "이름이 수정되어야 합니다");
    });
%}

### 9. 사용자 삭제
DELETE {{baseUrl}}/api/{{apiVersion}}/users/{{userId}}

> {%
    client.test("사용자 삭제 성공", function() {
        client.assert(response.status === 204, "응답 코드는 204여야 합니다");
    });
%}

### 10. 삭제된 사용자 조회 확인
GET {{baseUrl}}/api/{{apiVersion}}/users/{{userId}}

> {%
    client.test("삭제된 사용자 조회 실패", function() {
        client.assert(response.status === 400 || response.status === 404, "400 또는 404 에러여야 합니다");
    });
%}

### 11. Validation 테스트 - 이메일 형식 오류
POST {{baseUrl}}/api/{{apiVersion}}/users
Content-Type: {{contentType}}

{
  "email": "invalid-email",
  "password": "password123",
  "name": "테스트",
  "phoneNumber": "010-1234-5678"
}

> {%
    client.test("Validation 에러", function() {
        client.assert(response.status === 400, "응답 코드는 400이어야 합니다");
    });
%}

### 12. Validation 테스트 - 필수값 누락
POST {{baseUrl}}/api/{{apiVersion}}/users
Content-Type: {{contentType}}

{
  "email": "test@example.com",
  "password": "pass"
}

> {%
    client.test("Validation 에러", function() {
        client.assert(response.status === 400, "응답 코드는 400이어야 합니다");
    });
%}

### 13. Validation 테스트 - 전화번호 형식 오류
POST {{baseUrl}}/api/{{apiVersion}}/users
Content-Type: {{contentType}}

{
  "email": "test@example.com",
  "password": "password123",
  "name": "테스트",
  "phoneNumber": "01012345678"
}

> {%
    client.test("Validation 에러", function() {
        client.assert(response.status === 400, "응답 코드는 400이어야 합니다");
    });
%}

### 14. 중복 이메일 테스트
POST {{baseUrl}}/api/{{apiVersion}}/users
Content-Type: {{contentType}}

{
  "email": "user2@example.com",
  "password": "password123",
  "name": "중복테스트",
  "phoneNumber": "010-5555-6666"
}

> {%
    client.test("중복 이메일 에러", function() {
        client.assert(response.status === 400, "응답 코드는 400이어야 합니다");
    });
%}

### 15. 두 번째 사용자 삭제
DELETE {{baseUrl}}/api/{{apiVersion}}/users/{{userId2}}

> {%
    client.test("사용자 삭제 성공", function() {
        client.assert(response.status === 204, "응답 코드는 204여야 합니다");
    });
%}

###
